#This is Updated Yml file...

spring:
  application:
    name: auth-service
  autoconfigure:
    exclude: org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration

  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

  datasource:
    url: jdbc:postgresql://${POSTGRES_HOST:postgres}:${POSTGRES_PORT:5432}/keycloakdb
    username: ${POSTGRES_USER:keycloak}
    password: ${POSTGRES_PASSWORD:root}
    hikari:
      idle-timeout: 60000
      maximum-pool-size: 10

  jpa:
    hibernate:
      ddl-auto: update

  security:
    oauth2:
      client:
        registration:
          keycloak:
            client-id: auth-client
            client-secret: JLE8Aae60DDBlGjMUn05OIqgmx1lCIcI
            authorization-grant-type: authorization_code
            scope: openid
        provider:
          keycloak:
            issuer-uri: http://keycloak:8080/realms/authrealm
            user-name-attribute: preferred_username
      resource-server:
        jwt:
          issuer-uri: http://keycloak:8080/realms/authrealm

aws:
  access-key: ${AWS_ACCESS_KEY:}
  secret-key: ${AWS_SECRET_KEY:}
  region: ${AWS_REGION:us-east-1}
  s3:
    bucket: ${AWS_S3_BUCKET:qssence-bucket}

server:
  port: ${SERVER_PORT:8082}

eureka:
  client:
    serviceUrl:
      defaultZone: ${EUREKA_URL:http://discovery-server:8761/eureka/}

kafka:
  producer:
    bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS:kafka:9092}
    key-serializer: org.apache.kafka.common.serialization.StringSerializer
    value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
    auth-topic: auth-events
    group-topic: group-events
    role-topic: role-events
    user-topic: user-events

authService:
  tokenEndpoint: ${KEYCLOAK_TOKEN_ENDPOINT:http://keycloak:8080/realms/authrealm/protocol/openid-connect/token}

keycloak:
  realm: ${KEYCLOAK_REALM:authrealm}

subscription:
  panel:
    decode-url: ${SUBSCRIPTION_PANEL_URL:http://subscription-panel:8085/api/v2/licenses/decode/}
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: always
  health:
    mongo:
      enabled: false



#spring:
#  application:
#    name: auth-service
#  datasource:
#    url: jdbc:postgresql://localhost:5432/qssence_master
#    username: postgres
#    password: root
#    hikari:
#      idle-timeout: 60000
#      maximum-pool-size: 10
#  jpa:
#    hibernate:
#      ddl-auto: update
#  security:
#    oauth2:
#      client:
#        registration:
#          keycloak:
#            authorization-grant-type: authorization_code
#            client-id: auth-client
#            client-secret: s0ZsE7dhT0UTAhL4XqAcbnf6kfH5adip
#            scope: openid
#        provider:
#          keycloak:
#            issuer-uri: http://localhost:8080/realms/authrealm
#            user-name-attribute: preferred_username
#      resource-server:
#        jwt:
#          issuer-uri: http://localhost:8080/realms/authrealm
#
#server:
#  port: 8082
#
#eureka:
#  client:
#    service-url:  # âœ… Correct key
#      defaultZone: http://localhost:8761/eureka/
#
#kafka:
#  producer:
#    bootstrap-servers: localhost:9092
#    key-serializer: org.apache.kafka.common.serialization.StringSerializer
#    value-serializer: org.springframework.kafka.support.serializer.JsonSerializer
#    auth-topic: auth-events
#    group-topic: group-events
#    role-topic: role-events
#    user-topic: user-events
#
#authService:
#  tokenEndpoint: http://localhost:8080/realms/authrealm/protocol/openid-connect/token
#
#keycloak:
#  realm: authrealm
#
#  subscription:
#    panel:
#      decode-url: http://localhost:8085/api/v2/licenses/decode/
#
#
#
#aws:
#  s3:
#    bucket: qssence-bucket
#  region: us-east-1
#  access-key: AKIA4Z47JXMANZPYA56N
#  secret-key: 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
#
#  servlet:
#    multipart:
#      max-file-size: 10MB
#      max-request-size: 10MB
#
## Company Security Policy Configuration
#company:
#  security:
#    allow-password-caching: false
#    password-cache-timeout: 0
#    force-password-change-on-first-login: true
#    max-failed-login-attempts: 5
#    account-lockout-duration: 30
#    enable-sso: true
#    sso-session-timeout: 480
#    enable-auto-logout: true
#    inactivity-timeout: 30
#    enable-admin-session-timeout: true
#    admin-session-timeout: 60
